"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8017],{8017:(E,m,s)=>{s.r(m),s.d(m,{SolicitudesMembresiaComponent:()=>k});var d=s(8434),a=s(3092),g=s(9417),_=s(33),n=s(1360),p=s(366);function u(t,r){if(1&t&&(n.j41(0,"div",16)(1,"ion-note",17),n.EFF(2),n.k0s()()),2&t){const o=n.XpG();n.R7$(2),n.JRh(o.mensaje)}}function b(t,r){1&t&&(n.j41(0,"div",18),n.nrm(1,"ion-spinner"),n.j41(2,"p"),n.EFF(3,"Cargando solicitudes..."),n.k0s()())}function h(t,r){if(1&t&&(n.j41(0,"div",19)(1,"ion-text",20)(2,"p"),n.EFF(3),n.k0s()()()),2&t){const o=n.XpG();n.R7$(3),n.SpI("No hay solicitudes ",o.filtroEstado,"s")}}function M(t,r){if(1&t&&(n.j41(0,"div")(1,"label"),n.EFF(2,"Documento de Identidad:"),n.k0s(),n.nrm(3,"img",25),n.k0s()),2&t){const o=n.XpG().$implicit,e=n.XpG();n.R7$(3),n.Y8G("src",e.apiUrl+o.DocumentoIdentidad,n.B4B)}}function C(t,r){if(1&t&&(n.j41(0,"div")(1,"label"),n.EFF(2,"Comprobante de Domicilio:"),n.k0s(),n.nrm(3,"img",26),n.k0s()),2&t){const o=n.XpG().$implicit,e=n.XpG();n.R7$(3),n.Y8G("src",e.apiUrl+o.DocumentoDomicilio,n.B4B)}}function f(t,r){if(1&t){const o=n.RV6();n.j41(0,"ion-button",27),n.bIt("click",function(){n.eBV(o);const i=n.XpG().$implicit,c=n.XpG();return n.Njj(c.aprobarSolicitud(i.rut))}),n.EFF(1," Aprobar "),n.k0s()}}function x(t,r){if(1&t){const o=n.RV6();n.j41(0,"ion-button",28),n.bIt("click",function(){n.eBV(o);const i=n.XpG().$implicit,c=n.XpG();return n.Njj(c.rechazarSolicitud(i.rut))}),n.EFF(1," Rechazar "),n.k0s()}}function O(t,r){if(1&t&&(n.j41(0,"ion-item")(1,"ion-label")(2,"h3"),n.EFF(3,"Motivo de Rechazo"),n.k0s(),n.j41(4,"p"),n.EFF(5),n.k0s()()()),2&t){const o=n.XpG().$implicit;n.R7$(5),n.JRh(o.motivoRechazo)}}function P(t,r){if(1&t&&(n.j41(0,"div")(1,"ion-card",21)(2,"ion-card-header")(3,"ion-card-subtitle"),n.EFF(4),n.k0s(),n.j41(5,"ion-card-title"),n.EFF(6),n.k0s()(),n.j41(7,"ion-card-content")(8,"ion-list")(9,"ion-item")(10,"ion-label")(11,"h3"),n.EFF(12,"Nombre Completo"),n.k0s(),n.j41(13,"p"),n.EFF(14),n.k0s()()(),n.j41(15,"ion-item")(16,"ion-label")(17,"h3"),n.EFF(18,"Fecha de Solicitud"),n.k0s(),n.j41(19,"p"),n.EFF(20),n.nI1(21,"date"),n.k0s()()(),n.j41(22,"ion-item")(23,"ion-label")(24,"h3"),n.EFF(25,"Estado"),n.k0s(),n.j41(26,"p"),n.EFF(27),n.k0s()()()(),n.DNE(28,M,4,1,"div",22)(29,C,4,1,"div",22)(30,f,2,0,"ion-button",23)(31,x,2,0,"ion-button",24)(32,O,6,1,"ion-item",22),n.k0s()()()),2&t){const o=r.$implicit,e=n.XpG();n.R7$(4),n.SpI("RUT: ",o.rut,""),n.R7$(2),n.E5c("",o.nombre," ",o.apellidoPaterno," ",o.apellidoMaterno,""),n.R7$(8),n.E5c("",o.nombre," ",o.apellidoPaterno," ",o.apellidoMaterno,""),n.R7$(6),n.JRh(n.i5U(21,14,o.fechaSolicitud,"dd/MM/yyyy")),n.R7$(7),n.JRh(o.estadoSolicitud),n.R7$(),n.Y8G("ngIf",o.DocumentoIdentidad),n.R7$(),n.Y8G("ngIf",o.DocumentoDomicilio),n.R7$(),n.Y8G("ngIf","pendiente"===e.filtroEstado),n.R7$(),n.Y8G("ngIf","pendiente"===e.filtroEstado),n.R7$(),n.Y8G("ngIf","rechazada"===e.filtroEstado&&o.motivoRechazo)}}function v(t,r){if(1&t){const o=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Motivo de Rechazo"),n.k0s(),n.j41(4,"ion-buttons",3)(5,"ion-button",29),n.bIt("click",function(){n.eBV(o);const i=n.XpG();return n.Njj(i.motivoRechazo="")}),n.EFF(6,"Cerrar"),n.k0s()()()(),n.j41(7,"ion-content",4)(8,"ion-item")(9,"ion-label",30),n.EFF(10,"Ingrese el motivo del rechazo"),n.k0s(),n.j41(11,"ion-textarea",31),n.mxI("ngModelChange",function(i){n.eBV(o);const c=n.XpG();return n.DH7(c.motivoRechazo,i)||(c.motivoRechazo=i),n.Njj(i)}),n.k0s()(),n.j41(12,"ion-button",32),n.bIt("click",function(){n.eBV(o);const i=n.XpG();return n.Njj(i.rechazarSolicitud(i.solicitudes[0].rut))}),n.EFF(13," Confirmar Rechazo "),n.k0s()()}if(2&t){const o=n.XpG();n.R7$(11),n.R50("ngModel",o.motivoRechazo)}}let k=(()=>{var t;class r{constructor(e){this.sociosService=e,this.solicitudes=[],this.filtroEstado="pendiente",this.motivoRechazo="",this.cargando=!1,this.mensaje="",this.apiUrl="https://localhost:7287"}ngOnInit(){this.cargarSolicitudes()}cargarSolicitudes(){this.cargando=!0,this.sociosService.consultarSolicitudes(this.filtroEstado).subscribe({next:e=>{this.solicitudes=e,this.cargando=!1},error:e=>{console.error("Error al cargar solicitudes:",e),this.mensaje="Error al cargar las solicitudes",this.cargando=!1}})}aprobarSolicitud(e){this.cargando=!0,this.sociosService.aprobarSolicitud(e).subscribe({next:i=>{this.mensaje=i.mensaje,this.cargarSolicitudes()},error:i=>{console.error("Error al aprobar solicitud:",i),this.mensaje="Error al aprobar la solicitud",this.cargando=!1}})}rechazarSolicitud(e){if(!this.motivoRechazo.trim())return void(this.mensaje="Debe ingresar un motivo de rechazo");const i={motivoRechazo:this.motivoRechazo};this.cargando=!0,this.sociosService.rechazarSolicitud(e,i).subscribe({next:c=>{this.mensaje=c.mensaje,this.motivoRechazo="",this.cargarSolicitudes()},error:c=>{console.error("Error al rechazar solicitud:",c),this.mensaje="Error al rechazar la solicitud",this.cargando=!1}})}cambiarFiltro(e){console.log("Cambiando filtro a:",e),"string"==typeof e&&(this.filtroEstado=e,this.cargarSolicitudes())}}return(t=r).\u0275fac=function(e){return new(e||t)(n.rXU(p.W))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-solicitudes-membresia"]],decls:28,vars:8,consts:[["color","secondary"],["slot","start"],["defaultHref","/mantenedores/gestion-socios","text",""],["slot","end"],[1,"ion-padding"],[1,"page-title"],[1,"container"],[3,"ngModelChange","ionChange","ngModel"],["value","pendiente"],["value","aprobada"],["value","rechazada"],["class","success-message",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"didDismiss","isOpen"],[1,"success-message"],["color","primary"],[1,"loading-container"],[1,"error-container"],["color","medium"],[1,"general-info-card"],[4,"ngIf"],["expand","block","color","success",3,"click",4,"ngIf"],["expand","block","color","danger",3,"click",4,"ngIf"],["alt","Documento Identidad",2,"max-width","100%",3,"src"],["alt","Comprobante Domicilio",2,"max-width","100%",3,"src"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"],[3,"click"],["position","stacked"],["rows","4",3,"ngModelChange","ngModel"],["expand","block",3,"click"]],template:function(e,i){1&e&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"VecindApp"),n.k0s(),n.j41(6,"ion-buttons",3),n.nrm(7,"ion-menu-button"),n.k0s()()(),n.j41(8,"ion-content",4)(9,"h1",5),n.EFF(10,"Solicitudes de Membres\xeda"),n.k0s(),n.j41(11,"div",6)(12,"ion-segment",7),n.mxI("ngModelChange",function(l){return n.DH7(i.filtroEstado,l)||(i.filtroEstado=l),l}),n.bIt("ionChange",function(l){return i.cambiarFiltro((null==l.detail.value?null:l.detail.value.toString())||"pendiente")}),n.j41(13,"ion-segment-button",8)(14,"ion-label"),n.EFF(15,"Pendientes"),n.k0s()(),n.j41(16,"ion-segment-button",9)(17,"ion-label"),n.EFF(18,"Aprobadas"),n.k0s()(),n.j41(19,"ion-segment-button",10)(20,"ion-label"),n.EFF(21,"Rechazadas"),n.k0s()()(),n.DNE(22,u,3,1,"div",11)(23,b,4,0,"div",12)(24,h,4,1,"div",13)(25,P,33,17,"div",14),n.k0s(),n.j41(26,"ion-modal",15),n.bIt("didDismiss",function(){return i.motivoRechazo=""}),n.DNE(27,v,14,1,"ng-template"),n.k0s()()),2&e&&(n.R7$(8),n.xc7("--background","var(--ion-color-light)"),n.R7$(4),n.R50("ngModel",i.filtroEstado),n.R7$(10),n.Y8G("ngIf",i.mensaje),n.R7$(),n.Y8G("ngIf",i.cargando),n.R7$(),n.Y8G("ngIf",!i.cargando&&0===i.solicitudes.length),n.R7$(),n.Y8G("ngForOf",i.solicitudes),n.R7$(),n.Y8G("isOpen",""!==i.motivoRechazo))},dependencies:[d.MD,d.Sq,d.bT,d.vh,a.bv,a.Jm,a.QW,a.b_,a.I9,a.ME,a.HW,a.tN,a.W9,a.eU,a.uz,a.he,a.nf,a.MC,a.JI,a.Gp,a.eP,a.w2,a.IO,a.nc,a.BC,a.ai,a.Sb,a.Je,a.Gw,a.el,g.YN,g.BC,g.vS,_.iI],styles:["[_nghost-%COMP%]{--card-bg-color: var(--ion-color-light);--text-dark-color: #333333}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-secondary);--color: white}ion-title[_ngcontent-%COMP%]{color:#fff!important}.page-title[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-size:24px;font-weight:600;margin-bottom:20px;text-align:center}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 16px}.general-info-card[_ngcontent-%COMP%]{margin:16px 0;border-radius:12px;box-shadow:0 4px 12px #00000014;background:#fff;transition:transform .2s ease-in-out}.general-info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:var(--ion-color-light);border-radius:12px 12px 0 0;padding:16px}.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;margin-bottom:4px}.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-size:18px;font-weight:600}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--inner-padding-end: 0;margin-bottom:12px}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;margin-bottom:4px}.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-size:16px;font-weight:500}.general-info-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:16px;--border-radius: 8px;font-weight:500;text-transform:none;letter-spacing:0;height:48px}.general-info-card[_ngcontent-%COMP%]   ion-button[color=success][_ngcontent-%COMP%]{--background: var(--ion-color-success);--background-hover: var(--ion-color-success-shade)}.general-info-card[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]{--background: var(--ion-color-danger);--background-hover: var(--ion-color-danger-shade)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:16px}.error-container[_ngcontent-%COMP%]{text-align:center;padding:32px;background:var(--ion-color-light);border-radius:12px;margin:16px 0}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:16px;margin:0}.success-message[_ngcontent-%COMP%]{background:var(--ion-color-success-tint);color:var(--ion-color-success);padding:12px 16px;border-radius:8px;margin:16px 0;text-align:center}.success-message[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:14px;font-weight:500}img[_ngcontent-%COMP%]{border-radius:8px;margin-top:8px;border:1px solid var(--ion-color-light);box-shadow:0 2px 4px #0000000d}ion-modal[_ngcontent-%COMP%]{--height: auto;--border-radius: 16px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .1)}ion-modal[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-light);--border-radius: 16px 16px 0 0}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-top: 16px;--padding-bottom: 16px}ion-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--inner-padding-end: 0;margin-bottom:16px}ion-modal[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: 12px;--padding-end: 12px;--padding-top: 12px;--padding-bottom: 12px;border-radius:8px;margin-top:8px}@media (max-width: 576px){.page-title[_ngcontent-%COMP%]{font-size:20px}.container[_ngcontent-%COMP%]{padding:8px}ion-card[_ngcontent-%COMP%], .general-info-card[_ngcontent-%COMP%]{margin-bottom:8px}}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-menu-button[_ngcontent-%COMP%], ion-back-button[_ngcontent-%COMP%]{display:block!important;opacity:1!important;visibility:visible!important;color:#fff!important}"]}),r})()}}]);