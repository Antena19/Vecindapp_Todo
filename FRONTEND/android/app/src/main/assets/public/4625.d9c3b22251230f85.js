"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4625],{4625:(j,m,a)=>{a.r(m),a.d(m,{SolicitarMembresiaComponent:()=>x});var g=a(467),u=a(8434),e=a(3092),d=a(9417),p=a(33),n=a(1360),_=a(366),b=a(3165),h=a(4813),f=a(333);function v(t,l){if(1&t&&(n.j41(0,"ion-item",21)(1,"ion-thumbnail",1),n.nrm(2,"img",22),n.k0s(),n.j41(3,"ion-label")(4,"h3"),n.EFF(5,"Vista previa del carnet"),n.k0s()()()),2&t){const s=n.XpG();n.R7$(2),n.Y8G("src",s.documentoIdentidadPreview,n.B4B)}}function M(t,l){if(1&t&&(n.j41(0,"ion-item",21)(1,"ion-thumbnail",1),n.nrm(2,"img",23),n.k0s(),n.j41(3,"ion-label")(4,"h3"),n.EFF(5,"Vista previa del comprobante"),n.k0s()()()),2&t){const s=n.XpG();n.R7$(2),n.Y8G("src",s.documentoDomicilioPreview,n.B4B)}}function C(t,l){if(1&t&&(n.j41(0,"ion-note",24),n.EFF(1),n.k0s()),2&t){const s=n.XpG();n.R7$(),n.SpI(" ",s.mensajeError," ")}}function P(t,l){if(1&t&&(n.j41(0,"ion-note",25),n.EFF(1),n.k0s()),2&t){const s=n.XpG();n.R7$(),n.SpI(" ",s.mensaje," ")}}function E(t,l){1&t&&n.nrm(0,"ion-spinner",26)}function O(t,l){1&t&&(n.j41(0,"span"),n.EFF(1,"Enviar Solicitud"),n.k0s())}let x=(()=>{var t;class l{constructor(i,o,r,c){this.sociosService=i,this.http=o,this.autenticacionService=r,this.router=c,this.solicitud={rut:0,documentoIdentidad:null,documentoDomicilio:null},this.documentoIdentidadPreview=null,this.documentoDomicilioPreview=null,this.cargando=!1,this.mensaje="",this.mensajeError=""}ngOnInit(){this.cargarRutUsuario()}cargarRutUsuario(){const i=JSON.parse(localStorage.getItem("usuario")||"null");i&&i.rut?this.solicitud.rut=i.rut:this.mensajeError="No se pudo obtener el RUT del usuario. Por favor, inicie sesi\xf3n nuevamente."}onDocumentoIdentidadChange(i){const o=i.target;if(o.files&&o.files[0]){const r=o.files[0];this.solicitud.documentoIdentidad=r,this.previewImage(r,"identidad")}}onDocumentoDomicilioChange(i){const o=i.target;if(o.files&&o.files[0]){const r=o.files[0];this.solicitud.documentoDomicilio=r,this.previewImage(r,"domicilio")}}previewImage(i,o){const r=new FileReader;r.onload=c=>{"identidad"===o?this.documentoIdentidadPreview=c.target.result:this.documentoDomicilioPreview=c.target.result},r.readAsDataURL(i)}enviarSolicitud(){var i=this;return(0,g.A)(function*(){if(i.validarFormulario()){i.cargando=!0,i.mensaje="",i.mensajeError="";try{(yield i.sociosService.solicitarMembresia(i.solicitud).toPromise())&&(i.mensaje="\xa1Solicitud enviada exitosamente! Ser\xe1 notificado cuando su solicitud sea revisada.",i.limpiarFormulario(),setTimeout(()=>{i.router.navigate(["/home"])},2e3))}catch(r){var o;console.error("Error al enviar solicitud:",r),i.mensajeError=(null===(o=r.error)||void 0===o?void 0:o.mensaje)||"Error al enviar la solicitud. Por favor, intente nuevamente."}finally{i.cargando=!1}}})()}validarFormulario(){return this.solicitud.rut?this.solicitud.documentoIdentidad?!!this.solicitud.documentoDomicilio||(this.mensajeError="Debe adjuntar su comprobante de domicilio",!1):(this.mensajeError="Debe adjuntar su carnet de identidad",!1):(this.mensajeError="Debe ingresar su RUT",!1)}limpiarFormulario(){this.solicitud={rut:0,documentoIdentidad:null,documentoDomicilio:null},this.documentoIdentidadPreview=null,this.documentoDomicilioPreview=null}}return(t=l).\u0275fac=function(i){return new(i||t)(n.rXU(_.W),n.rXU(b.Qq),n.rXU(h.Z),n.rXU(f.Ix))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-solicitar-membresia"]],decls:64,vars:10,consts:[["color","secondary"],["slot","start"],["defaultHref","/home","text",""],["slot","end"],[1,"ion-padding"],[1,"general-info-card"],[3,"ngSubmit"],["position","stacked"],["type","number","name","rut","required","","disabled","",3,"ngModelChange","ngModel"],["type","file","accept","image/*","required","",3,"change"],["class","preview-container",4,"ngIf"],["type","file","accept","image/*,.pdf","required","",3,"change"],["color","danger","class","error-message",4,"ngIf"],["color","success","class","success-message",4,"ngIf"],[1,"ion-padding-top"],["expand","block","type","submit",1,"primary-button",3,"disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["name","information-circle-outline","slot","start","color","primary"],["name","time-outline","slot","start","color","primary"],["name","mail-outline","slot","start","color","primary"],[1,"preview-container"],["alt","Vista previa carnet",1,"preview-image",3,"src"],["alt","Vista previa comprobante",1,"preview-image",3,"src"],["color","danger",1,"error-message"],["color","success",1,"success-message"],["name","crescent"]],template:function(i,o){1&i&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"VecindApp"),n.k0s(),n.j41(6,"ion-buttons",3),n.nrm(7,"ion-menu-button"),n.k0s()()(),n.j41(8,"ion-content",4)(9,"ion-card",5)(10,"ion-card-header")(11,"ion-card-title"),n.EFF(12,"Solicitud de Membres\xeda"),n.k0s(),n.j41(13,"ion-card-subtitle"),n.EFF(14," Complete el formulario y adjunte los documentos requeridos para solicitar su membres\xeda "),n.k0s()(),n.j41(15,"ion-card-content")(16,"form",6),n.bIt("ngSubmit",function(){return o.enviarSolicitud()}),n.j41(17,"ion-item")(18,"ion-label",7),n.EFF(19,"RUT"),n.k0s(),n.j41(20,"ion-input",8),n.mxI("ngModelChange",function(c){return n.DH7(o.solicitud.rut,c)||(o.solicitud.rut=c),c}),n.k0s()(),n.j41(21,"ion-item")(22,"ion-label",7),n.EFF(23,"Carnet de Identidad"),n.k0s(),n.j41(24,"ion-input",9),n.bIt("change",function(c){return o.onDocumentoIdentidadChange(c)}),n.k0s()(),n.DNE(25,v,6,1,"ion-item",10),n.j41(26,"ion-item")(27,"ion-label",7),n.EFF(28,"Comprobante de Domicilio"),n.k0s(),n.j41(29,"ion-input",11),n.bIt("change",function(c){return o.onDocumentoDomicilioChange(c)}),n.k0s()(),n.DNE(30,M,6,1,"ion-item",10)(31,C,2,1,"ion-note",12)(32,P,2,1,"ion-note",13),n.j41(33,"div",14)(34,"ion-button",15),n.DNE(35,E,1,0,"ion-spinner",16)(36,O,2,0,"span",17),n.k0s()()()()(),n.j41(37,"ion-card",5)(38,"ion-card-header")(39,"ion-card-title"),n.EFF(40,"Informaci\xf3n Importante"),n.k0s()(),n.j41(41,"ion-card-content")(42,"ion-list")(43,"ion-item"),n.nrm(44,"ion-icon",18),n.j41(45,"ion-label")(46,"h3"),n.EFF(47,"Documentos Requeridos"),n.k0s(),n.j41(48,"p"),n.EFF(49,"Carnet de identidad vigente y comprobante de domicilio actualizado"),n.k0s()()(),n.j41(50,"ion-item"),n.nrm(51,"ion-icon",19),n.j41(52,"ion-label")(53,"h3"),n.EFF(54,"Tiempo de Procesamiento"),n.k0s(),n.j41(55,"p"),n.EFF(56,"Su solicitud ser\xe1 revisada en un plazo m\xe1ximo de 48 horas h\xe1biles"),n.k0s()()(),n.j41(57,"ion-item"),n.nrm(58,"ion-icon",20),n.j41(59,"ion-label")(60,"h3"),n.EFF(61,"Notificaci\xf3n"),n.k0s(),n.j41(62,"p"),n.EFF(63,"Recibir\xe1 una notificaci\xf3n por correo electr\xf3nico sobre el estado de su solicitud"),n.k0s()()()()()()()),2&i&&(n.R7$(8),n.xc7("--background","var(--ion-color-light)"),n.R7$(12),n.R50("ngModel",o.solicitud.rut),n.R7$(5),n.Y8G("ngIf",o.documentoIdentidadPreview),n.R7$(5),n.Y8G("ngIf",o.documentoDomicilioPreview),n.R7$(),n.Y8G("ngIf",o.mensajeError),n.R7$(),n.Y8G("ngIf",o.mensaje),n.R7$(2),n.Y8G("disabled",o.cargando),n.R7$(),n.Y8G("ngIf",o.cargando),n.R7$(),n.Y8G("ngIf",!o.cargando))},dependencies:[u.MD,u.bT,e.bv,e.Jm,e.QW,e.b_,e.I9,e.ME,e.HW,e.tN,e.W9,e.eU,e.iq,e.$w,e.uz,e.he,e.nf,e.MC,e.JI,e.w2,e.Zx,e.BC,e.ai,e.su,e.Gw,e.el,d.YN,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,p.iI],styles:[".preview-image[_ngcontent-%COMP%]{max-width:200px;max-height:200px;margin:10px 0;border-radius:8px;object-fit:cover}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin:10px 0;font-size:14px;padding:8px;background-color:rgba(var(--ion-color-danger-rgb),.1);border-radius:4px}.success-message[_ngcontent-%COMP%]{color:var(--ion-color-success);margin:10px 0;font-size:14px;padding:8px;background-color:rgba(var(--ion-color-success-rgb),.1);border-radius:4px}.file-input-container[_ngcontent-%COMP%]{margin:15px 0}.preview-container[_ngcontent-%COMP%]{--background: var(--ion-color-light);margin:10px 0;padding:10px;border:1px solid var(--ion-color-medium);border-radius:8px;box-shadow:0 2px 4px #0000000d}.preview-container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 100px;margin-right:16px}.preview-container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-weight:500;margin-bottom:4px}ion-card.general-info-card[_ngcontent-%COMP%]{background-color:var(--ion-color-light);border-radius:10px;box-shadow:0 4px 12px #0000001a;margin-bottom:16px}ion-card.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:16px;background-color:var(--ion-color-light)}ion-card.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:1.25rem;font-weight:600}ion-card.general-info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem;margin-top:4px}ion-card.general-info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-color-light);--border-color: var(--ion-color-medium);--border-radius: 8px;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-weight:500}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: white;--padding-start: 12px;--padding-end: 12px;--padding-top: 8px;--padding-bottom: 8px;border-radius:4px;margin-top:4px}ion-button.primary-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--background-activated: var(--ion-color-primary-shade);--background-hover: var(--ion-color-primary-tint);--color: white;font-weight:500;margin-top:16px;height:48px;--border-radius: 8px}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:12px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:24px;margin-right:12px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-weight:600;margin-bottom:4px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem;line-height:1.4}"]}),l})()}}]);