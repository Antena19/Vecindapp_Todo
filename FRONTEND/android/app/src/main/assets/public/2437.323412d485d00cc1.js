"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2437],{2437:(E,_,c)=>{c.r(_),c.d(_,{EditarSocioComponent:()=>h});var l=c(467),p=c(8434),r=c(3092),g=c(9417),u=c(33),o=c(1360),m=c(333),C=c(366);function M(a,d){1&a&&(o.j41(0,"div",10),o.nrm(1,"ion-spinner",11),o.j41(2,"p"),o.EFF(3,"Cargando informaci\xf3n del socio..."),o.k0s()())}function f(a,d){if(1&a&&(o.j41(0,"div",12)(1,"ion-text",13)(2,"p"),o.EFF(3),o.k0s()()()),2&a){const i=o.XpG();o.R7$(3),o.JRh(i.error)}}function O(a,d){1&a&&o.nrm(0,"ion-spinner",11)}function P(a,d){1&a&&(o.j41(0,"span"),o.EFF(1,"Guardar Cambios"),o.k0s())}function v(a,d){if(1&a){const i=o.RV6();o.j41(0,"div",14)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),o.EFF(4,"Informaci\xf3n del Socio"),o.k0s()(),o.j41(5,"ion-card-content")(6,"p")(7,"strong"),o.EFF(8,"ID:"),o.k0s(),o.EFF(9),o.k0s(),o.j41(10,"p")(11,"strong"),o.EFF(12,"Nombre:"),o.k0s(),o.EFF(13),o.k0s(),o.j41(14,"p")(15,"strong"),o.EFF(16,"RUT:"),o.k0s(),o.EFF(17),o.k0s(),o.j41(18,"p")(19,"strong"),o.EFF(20,"Email:"),o.k0s(),o.EFF(21),o.k0s(),o.j41(22,"p")(23,"strong"),o.EFF(24,"Tel\xe9fono:"),o.k0s(),o.EFF(25),o.k0s(),o.j41(26,"p")(27,"strong"),o.EFF(28,"Direcci\xf3n:"),o.k0s(),o.EFF(29),o.k0s()()(),o.j41(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),o.EFF(33,"Modificar estado del socio"),o.k0s()(),o.j41(34,"ion-card-content")(35,"ion-item")(36,"ion-label"),o.EFF(37),o.k0s(),o.j41(38,"ion-toggle",15),o.mxI("ngModelChange",function(t){o.eBV(i);const e=o.XpG();return o.DH7(e.estadoActual.estado,t)||(e.estadoActual.estado=t),o.Njj(t)}),o.k0s()(),o.j41(39,"ion-item")(40,"ion-label",16),o.EFF(41),o.k0s(),o.j41(42,"ion-textarea",17),o.mxI("ngModelChange",function(t){o.eBV(i);const e=o.XpG();return o.DH7(e.estadoActual.motivo,t)||(e.estadoActual.motivo=t),o.Njj(t)}),o.k0s()()()(),o.j41(43,"div",18)(44,"ion-button",19),o.bIt("click",function(){o.eBV(i);const t=o.XpG();return o.Njj(t.guardarCambios())}),o.DNE(45,O,1,0,"ion-spinner",20)(46,P,2,0,"span",21),o.k0s(),o.j41(47,"ion-button",22),o.EFF(48," Cancelar "),o.k0s()()()}if(2&a){const i=o.XpG();o.R7$(9),o.SpI(" ",i.socio.idSocio,""),o.R7$(4),o.SpI(" ",i.socio.nombreCompleto,""),o.R7$(4),o.SpI(" ",i.formatearRut(i.socio.rut,i.socio.dvRut),""),o.R7$(4),o.SpI(" ",i.socio.correo,""),o.R7$(4),o.SpI(" ",i.socio.telefono,""),o.R7$(4),o.SpI(" ",i.socio.direccion,""),o.R7$(6),o.AVh("active-state",i.estadoActual.estado)("inactive-state",!i.estadoActual.estado),o.R7$(2),o.SpI("Estado: ",i.estadoActual.estado?"Activo":"Inactivo",""),o.R7$(),o.R50("ngModel",i.estadoActual.estado),o.R7$(3),o.SpI(" ",i.estadoActual.estado?"Motivo de activaci\xf3n":"Motivo de desactivaci\xf3n"," "),o.R7$(),o.R50("ngModel",i.estadoActual.motivo),o.Y8G("placeholder",i.estadoActual.estado?"Ingrese el motivo de activaci\xf3n":"Ingrese el motivo de desactivaci\xf3n"),o.R7$(2),o.Y8G("disabled",i.guardando),o.R7$(),o.Y8G("ngIf",i.guardando),o.R7$(),o.Y8G("ngIf",!i.guardando)}}let h=(()=>{var a;class d{constructor(n,t,e,s){this.route=n,this.router=t,this.sociosService=e,this.toastController=s,this.socio=null,this.loading=!0,this.error="",this.guardando=!1,this.estadoActual={estado:!0,motivo:""}}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");n?this.cargarSocio(+n):(this.error="ID de socio no proporcionado",this.loading=!1)}cargarSocio(n){this.loading=!0,this.sociosService.listarTodosSocios().subscribe({next:t=>{const e=t.find(s=>s.idSocio===n);e?(this.socio=e,console.log("Valor de socioEncontrado.estado en editar-socio:",e.estado,typeof e.estado),this.estadoActual.estado=e.estado,this.estadoActual.motivo=e.motivoDesactivacion):this.error="Socio no encontrado",this.loading=!1},error:t=>{console.error("Error al cargar el socio:",t),this.error="Error al cargar la informaci\xf3n del socio",this.loading=!1}})}guardarCambios(){var n=this;return(0,l.A)(function*(){if(n.socio){n.guardando=!0;try{if(!n.estadoActual.motivo){const e=`Debe proporcionar un motivo para ${n.estadoActual.estado?"activar":"desactivar"} al socio`;return yield n.presentToast(e,"danger"),void(n.guardando=!1)}n.sociosService.actualizarEstadoSocio(n.socio.idSocio,n.estadoActual.estado,n.estadoActual.motivo).subscribe({next:(t=(0,l.A)(function*(){var e;yield n.presentToast("Estado del socio actualizado correctamente","success"),n.router.navigate(["/mantenedores/gestion-socios/detalle",null===(e=n.socio)||void 0===e?void 0:e.idSocio])}),function(){return t.apply(this,arguments)}),error:function(){var t=(0,l.A)(function*(e){var s;const x=(null===(s=e.error)||void 0===s?void 0:s.mensaje)||"Error al actualizar el estado del socio";yield n.presentToast(x,"danger"),console.error("Error al actualizar el estado del socio:",e),n.guardando=!1});return function(s){return t.apply(this,arguments)}}()})}catch(t){const e=t.message||"Error al guardar los cambios";yield n.presentToast(e,"danger"),n.guardando=!1}}var t})()}presentToast(n,t){var e=this;return(0,l.A)(function*(){(yield e.toastController.create({message:n,duration:3e3,position:"bottom",color:t})).present()})()}formatearRut(n,t){return n?`${n}-${t}`:""}}return(a=d).\u0275fac=function(n){return new(n||a)(o.rXU(m.nX),o.rXU(m.Ix),o.rXU(C.W),o.rXU(r.K_))},a.\u0275cmp=o.VBU({type:a,selectors:[["app-editar-socio"]],decls:15,vars:6,consts:[["color","secondary"],["slot","start"],["text","",3,"defaultHref"],["slot","end"],[1,"ion-padding"],[1,"container"],[1,"page-title"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading-container"],["name","crescent"],[1,"error-container"],["color","danger"],[1,"form-container"],["color","primary",3,"ngModelChange","ngModel"],["position","stacked"],["rows","3",3,"ngModelChange","ngModel","placeholder"],[1,"action-buttons"],["expand","block","color","primary",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["expand","block","color","medium","routerLink","/mantenedores/gestion-socios/lista-socios"]],template:function(n,t){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o.nrm(3,"ion-back-button",2),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"VecindApp"),o.k0s(),o.j41(6,"ion-buttons",3),o.nrm(7,"ion-menu-button"),o.k0s()()(),o.j41(8,"ion-content",4)(9,"div",5)(10,"h1",6),o.EFF(11,"Editar Socio"),o.k0s(),o.DNE(12,M,4,0,"div",7)(13,f,4,1,"div",8)(14,v,49,18,"div",9),o.k0s()()),2&n&&(o.R7$(3),o.Y8G("defaultHref","/mantenedores/gestion-socios/detalle/"+(null==t.socio?null:t.socio.idSocio)),o.R7$(5),o.xc7("--background","var(--ion-color-light)"),o.R7$(4),o.Y8G("ngIf",t.loading),o.R7$(),o.Y8G("ngIf",t.error),o.R7$(),o.Y8G("ngIf",!t.loading&&!t.error&&t.socio))},dependencies:[p.MD,p.bT,r.bv,r.Jm,r.QW,r.b_,r.I9,r.ME,r.tN,r.W9,r.eU,r.uz,r.he,r.MC,r.w2,r.IO,r.nc,r.BC,r.BY,r.ai,r.hB,r.Gw,r.el,r.N7,g.YN,g.BC,g.vS,g.X1,u.iI,u.Wk],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:16px}.page-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:24px;font-weight:600;margin:16px 0;text-align:center}.form-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px;box-shadow:0 4px 6px #0000001a}.form-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-light-shade)}.form-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--ion-color-primary)}.form-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:var(--ion-color-dark)}.form-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.action-buttons[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:column;gap:12px}.action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.error-container[_ngcontent-%COMP%]{padding:16px;text-align:center;background-color:var(--ion-color-danger-tint);border-radius:8px;margin:16px 0}ion-toggle[_ngcontent-%COMP%]{--background: var(--ion-color-medium);--background-checked: var(--ion-color-primary);--handle-background: #ffffff;--handle-background-checked: #ffffff}ion-textarea[_ngcontent-%COMP%]{--background: #ffffff;--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;border-radius:8px;margin-top:8px}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;margin:16px 0}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-medium);margin-bottom:8px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--ion-color-dark)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--padding-end: 0;--padding-top: 8px;--padding-bottom: 8px;--border-color: var(--ion-color-light)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:16px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--ion-color-medium);margin-bottom:4px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-dark);margin:0}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item.item-has-focus[_ngcontent-%COMP%]{--highlight-background: var(--ion-color-primary)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item.active-state[_ngcontent-%COMP%]{--background: var(--ion-color-success-tint);border:1px solid var(--ion-color-success)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item.inactive-state[_ngcontent-%COMP%]{--background: var(--ion-color-danger-tint);border:1px solid var(--ion-color-danger)}.custom-textarea[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px;margin-top:8px;border-radius:8px}@media (max-width: 576px){.header-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px}.header-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{text-align:center}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;margin:0}}"]}),d})()}}]);