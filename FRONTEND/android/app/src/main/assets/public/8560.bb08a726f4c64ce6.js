"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8560],{8560:(E,u,g)=>{g.r(u),g.d(u,{LoginPage:()=>k});var _=g(467),h=g(8434),r=g(9417),e=g(3092),n=g(1360),f=g(333),P=g(4813);function C(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"El RUT es obligatorio"),n.k0s())}function M(i,l){if(1&i&&(n.j41(0,"div",19),n.DNE(1,C,2,0,"span",15),n.k0s()),2&i){let s;const t=n.XpG();n.R7$(),n.Y8G("ngIf",null==(s=t.loginForm.get("rut"))||null==s.errors?null:s.errors.required)}}function O(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"La contrase\xf1a es obligatoria"),n.k0s())}function b(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),n.k0s())}function v(i,l){if(1&i&&(n.j41(0,"div",19),n.DNE(1,O,2,0,"span",15)(2,b,2,0,"span",15),n.k0s()),2&i){let s,t;const o=n.XpG();n.R7$(),n.Y8G("ngIf",null==(s=o.loginForm.get("password"))||null==s.errors?null:s.errors.required),n.R7$(),n.Y8G("ngIf",null==(t=o.loginForm.get("password"))||null==t.errors?null:t.errors.minlength)}}function F(i,l){1&i&&n.nrm(0,"ion-spinner",20)}function w(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"Iniciar Sesi\xf3n"),n.k0s())}let k=(()=>{var i;class l{constructor(t,o,a,p,c){this.formBuilder=t,this.router=o,this.alertController=a,this.loadingController=p,this.autenticacionService=c,this.isLoading=!1,this.showPassword=!1}ngOnInit(){this.initForm(),this.limpiarFormulario(),this.autenticacionService.sesionCerrada.subscribe(t=>{t&&this.limpiarFormulario()})}ngOnDestroy(){this.limpiarFormulario()}initForm(){this.loginForm=this.formBuilder.group({rut:["",[r.k0.required,r.k0.pattern(/^[0-9]{7,8}$/)]],dv_rut:["",[r.k0.required,r.k0.pattern(/^[0-9kK]$/)]],password:["",[r.k0.required,r.k0.minLength(8)]]})}limpiarFormulario(){this.loginForm&&(this.loginForm.reset(),this.showPassword=!1)}togglePassword(){this.showPassword=!this.showPassword}login(){var t=this;return(0,_.A)(function*(){if(t.loginForm.invalid)return void t.mostrarMensaje("Error de validaci\xf3n","Por favor, completa correctamente todos los campos.");t.isLoading=!0;const o=yield t.loadingController.create({message:"Iniciando sesi\xf3n...",spinner:"circles"});yield o.present();const{rut:a,dv_rut:p,password:c}=t.loginForm.value;console.log("FLAG1"),t.autenticacionService.iniciarSesion(a,p,c).subscribe({next:d=>{console.log("FLAG2"),o.dismiss(),t.isLoading=!1,t.router.navigate(["/home"])},error:d=>{var m;o.dismiss(),t.isLoading=!1,console.error("Error de inicio de sesi\xf3n:",d);const x=(null===(m=d.error)||void 0===m?void 0:m.mensaje)||"No se pudo iniciar sesi\xf3n. Verifica tus credenciales e intenta nuevamente.";t.mostrarMensaje("Error de inicio de sesi\xf3n",x)}})})()}mostrarMensaje(t,o){var a=this;return(0,_.A)(function*(){yield(yield a.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}irARegistro(){this.router.navigate(["/registro"])}irARecuperarPassword(){this.router.navigate(["/recuperar-password"])}}return(i=l).\u0275fac=function(t){return new(t||i)(n.rXU(r.ok),n.rXU(f.Ix),n.rXU(e.hG),n.rXU(e.Xi),n.rXU(P.Z))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-login"]],decls:42,vars:10,consts:[["color","secondary"],[1,"ion-padding"],[1,"logo-container","ion-text-center"],[3,"ngSubmit","formGroup"],[1,"input-container"],[1,"rut-container"],["type","number","formControlName","rut","inputmode","numeric","placeholder","Ingresa tu RUT"],[1,"rut-separator"],[1,"dv-item"],["type","text","formControlName","dv_rut","maxlength","1","placeholder","DV"],["class","error-message",4,"ngIf"],["formControlName","password","placeholder","Ingresa tu contrase\xf1a",3,"type"],["slot","end",1,"password-toggle-icon",3,"click","name"],["expand","block","type","submit","color","primary",1,"ion-margin-top","login-button",3,"disabled"],["name","circles",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center","ion-padding-top"],["fill","clear","size","small",3,"click"],["expand","block","fill","outline",3,"click"],[1,"error-message"],["name","circles"]],template:function(t,o){if(1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n.EFF(3,"VecindApp"),n.k0s()()(),n.j41(4,"ion-content",1)(5,"div",2)(6,"h1"),n.EFF(7,"Junta de Vecinos"),n.k0s(),n.j41(8,"h2"),n.EFF(9,"Portal Puerto Montt"),n.k0s()(),n.j41(10,"form",3),n.bIt("ngSubmit",function(){return o.login()}),n.j41(11,"ion-card")(12,"ion-card-content")(13,"div",4)(14,"ion-label"),n.EFF(15,"RUT (sin puntos)"),n.k0s(),n.j41(16,"div",5)(17,"ion-item"),n.nrm(18,"ion-input",6),n.k0s(),n.j41(19,"div",7),n.EFF(20,"-"),n.k0s(),n.j41(21,"ion-item",8),n.nrm(22,"ion-input",9),n.k0s()()(),n.DNE(23,M,2,1,"div",10),n.j41(24,"div",4)(25,"ion-label"),n.EFF(26,"Contrase\xf1a"),n.k0s(),n.j41(27,"ion-item"),n.nrm(28,"ion-input",11),n.j41(29,"ion-icon",12),n.bIt("click",function(){return o.togglePassword()}),n.k0s()()(),n.DNE(30,v,3,2,"div",10),n.j41(31,"ion-button",13),n.DNE(32,F,1,0,"ion-spinner",14)(33,w,2,0,"span",15),n.k0s(),n.j41(34,"div",16)(35,"ion-button",17),n.bIt("click",function(){return o.irARecuperarPassword()}),n.EFF(36," \xbfOlvidaste tu contrase\xf1a? "),n.k0s()()()()(),n.j41(37,"div",16)(38,"p"),n.EFF(39,"\xbfNo tienes una cuenta?"),n.k0s(),n.j41(40,"ion-button",18),n.bIt("click",function(){return o.irARegistro()}),n.EFF(41," Reg\xedstrate "),n.k0s()()()),2&t){let a,p;n.R7$(4),n.xc7("--background","var(--ion-color-light)"),n.R7$(6),n.Y8G("formGroup",o.loginForm),n.R7$(13),n.Y8G("ngIf",(null==(a=o.loginForm.get("rut"))?null:a.invalid)&&(null==(a=o.loginForm.get("rut"))?null:a.touched)),n.R7$(5),n.Y8G("type",o.showPassword?"text":"password"),n.R7$(),n.Y8G("name",o.showPassword?"eye-off-outline":"eye-outline"),n.R7$(),n.Y8G("ngIf",(null==(p=o.loginForm.get("password"))?null:p.invalid)&&(null==(p=o.loginForm.get("password"))?null:p.touched)),n.R7$(),n.Y8G("disabled",o.loginForm.invalid||o.isLoading),n.R7$(),n.Y8G("ngIf",o.isLoading),n.R7$(),n.Y8G("ngIf",!o.isLoading)}},dependencies:[e.bv,e.Jm,e.b_,e.I9,e.W9,e.eU,e.iq,e.$w,e.uz,e.he,e.w2,e.BC,e.ai,e.su,e.Gw,h.MD,h.bT,r.X1,r.qT,r.BC,r.cb,r.tU,r.j4,r.JD],styles:[".logo-container[_ngcontent-%COMP%]{padding:2px 0;margin-bottom:2px}.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin-bottom:2px;color:var(--ion-color-primary)}.logo-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin:0;color:var(--ion-color-secondary)}.logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0;font-size:14px}ion-card[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0003!important;border-radius:10px;background-color:beige}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #ffffff;--color: #273746;--padding-start: 0;--inner-padding-end: 0;--padding-end: 0;--inner-padding-start: 10px;--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important;--highlight-color: transparent !important;--highlight-color-focused: transparent !important;--highlight-height: 0 !important;--inner-border-width: 0 !important;--show-full-highlight: 0 !important;--show-inset-highlight: 0 !important;--border-radius: 8px;--min-height: 45px;--ripple-color: transparent;--background-focused: #ffffff;--background-hover: #ffffff;margin-bottom:8px;box-shadow:0 2px 4px #0000001a;border:none!important;outline:none!important;padding:0}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]:after{display:none!important}[_nghost-%COMP%]   ion-item.item-has-focus[_ngcontent-%COMP%]{--highlight-background: transparent !important;--highlight-color-focused: transparent !important;--background-focused: #ffffff}[_nghost-%COMP%]   ion-item.item-has-value[_ngcontent-%COMP%]{--highlight-background: transparent !important;--background-focused: #ffffff}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   .item-native[_ngcontent-%COMP%]{border:none!important;--inner-border-width: 0 !important;background:transparent!important;padding:0;margin:0}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   .item-native[_ngcontent-%COMP%]:after{display:none!important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border:none!important;--inner-border-width: 0 !important;padding:0;margin:0}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]:after{display:none!important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 8px;--padding-bottom: 8px;--background: transparent;--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important;--highlight-color: transparent !important;--highlight-color-focused: transparent !important;--highlight-height: 0 !important;--inner-border-width: 0 !important;border:none!important;outline:none!important;margin:0}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:after{display:none!important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input.has-focus[_ngcontent-%COMP%]{--highlight-background: transparent !important;--highlight-color-focused: transparent !important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input.has-focus[_ngcontent-%COMP%]::part(placeholder){opacity:0;transition:opacity .15s ease}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(placeholder){opacity:1;transition:opacity .15s ease}[_nghost-%COMP%]     .item-native, [_nghost-%COMP%]     .item-inner, [_nghost-%COMP%]     .input-wrapper{border:none!important;--inner-border-width: 0 !important;background:transparent!important;padding:0;margin:0}[_nghost-%COMP%]     .item-native:before, [_nghost-%COMP%]     .item-native:after, [_nghost-%COMP%]     .item-inner:before, [_nghost-%COMP%]     .item-inner:after, [_nghost-%COMP%]     .input-wrapper:before, [_nghost-%COMP%]     .input-wrapper:after{display:none!important}[_nghost-%COMP%]     ion-input.native-input{border:none!important;outline:none!important;box-shadow:none!important;padding:0;margin:0}ion-item.item[_ngcontent-%COMP%]{--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important;--highlight-color: transparent !important;--highlight-color-focused: transparent !important;--highlight-height: 0 !important}ion-item[_ngcontent-%COMP%]::part(native){--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important;--highlight-color: transparent !important;--highlight-color-focused: transparent !important;--highlight-height: 0 !important}ion-item[_ngcontent-%COMP%]::part(detail-icon){--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important}ion-item[_ngcontent-%COMP%]::part(internal){--border-width: 0 !important;--border-style: none !important;--border-color: transparent !important}ion-label[_ngcontent-%COMP%]{color:#92949c;font-weight:500}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:12px;margin-left:16px;margin-top:5px;margin-bottom:10px}.rut-container[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.rut-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{flex:4}.rut-container[_ngcontent-%COMP%]   .dv-item[_ngcontent-%COMP%]{flex:1;min-width:60px}.rut-container[_ngcontent-%COMP%]   .rut-separator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:24px;margin:0 8px;padding-bottom:10px;color:var(--ion-color-medium)}ion-button[_ngcontent-%COMP%]{margin-top:16px;--border-radius: 4px}.password-toggle-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#92949c;cursor:pointer;margin-right:8px;padding:0}.password-toggle-icon[_ngcontent-%COMP%]:hover{color:var(--ion-color-primary)}@media (max-width: 576px){.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}.logo-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}}"]}),l})()}}]);